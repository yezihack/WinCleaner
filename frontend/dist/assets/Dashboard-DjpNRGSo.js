import{d as U,o as j,c as f,a as o,b as t,w as e,r as h,e as z,E as R,f as d,g as S,h as c,i as T,t as s,j as K,F as O,k as q,l as i,m as D,n as F}from"./index-CeN3S9B-.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"dashboard"},J={class:"stat-text"},Q={class:"stat-text"},W={class:"card-header-row"},X={key:0,style:{height:"80px"}},Y={key:1,class:"gpu-list"},Z={class:"gpu-header"},$={class:"gpu-name"},ee={key:0,style:{"margin-top":"8px"}},te={style:{"margin-top":"16px","text-align":"right"}},ae=U({__name:"Dashboard",setup(oe){const y=h(!1),b=h(!1),k=h(!1),g=h([]),l=S({os:"",hostname:"",cpu_usage:0,mem_total:0,mem_used:0,mem_percent:0,disk_total:0,disk_used:0,disk_percent:0,public_ip:"",ip_location:"",ip_operator:""}),x=n=>n<50?"#67c23a":n<80?"#e6a23c":"#f56c6c",u=n=>{if(n===0)return"0 B";const a=1024,m=["B","KB","MB","GB","TB"],_=Math.floor(Math.log(n)/Math.log(a));return parseFloat((n/Math.pow(a,_)).toFixed(1))+" "+m[_]},B=async()=>{y.value=!0;try{const n=await z.getSystemInfo();Object.assign(l,n)}catch{R.error("获取系统信息失败")}finally{y.value=!1}},I=async()=>{b.value=!0;try{const n=await z.getGPUInfo();g.value=n.gpus||[],k.value=!0}catch{g.value=[],k.value=!0}finally{b.value=!1}};return j(()=>{B(),I()}),(n,a)=>{const m=d("el-progress"),_=d("el-card"),v=d("el-col"),w=d("el-row"),M=d("el-tag"),p=d("el-descriptions-item"),C=d("el-descriptions"),N=d("el-empty"),P=d("Refresh"),V=d("el-icon"),E=d("el-button"),G=T("loading");return c(),f("div",H,[a[9]||(a[9]=o("h2",{style:{"margin-bottom":"20px",color:"#303133"}},"系统概览",-1)),t(w,{gutter:20},{default:e(()=>[t(v,{span:8},{default:e(()=>[t(_,{shadow:"hover"},{header:e(()=>[...a[0]||(a[0]=[o("span",null,"CPU 使用率",-1)])]),default:e(()=>[t(m,{type:"dashboard",percentage:Math.round(l.cpu_usage),color:x},null,8,["percentage"]),a[1]||(a[1]=o("p",{class:"stat-text"}," ",-1))]),_:1})]),_:1}),t(v,{span:8},{default:e(()=>[t(_,{shadow:"hover"},{header:e(()=>[...a[2]||(a[2]=[o("span",null,"内存使用",-1)])]),default:e(()=>[t(m,{type:"dashboard",percentage:Math.round(l.mem_percent),color:x},null,8,["percentage"]),o("p",J,s(u(l.mem_used))+" / "+s(u(l.mem_total)),1)]),_:1})]),_:1}),t(v,{span:8},{default:e(()=>[t(_,{shadow:"hover"},{header:e(()=>[...a[3]||(a[3]=[o("span",null,"磁盘使用 (C:)",-1)])]),default:e(()=>[t(m,{type:"dashboard",percentage:Math.round(l.disk_percent),color:x},null,8,["percentage"]),o("p",Q,s(u(l.disk_used))+" / "+s(u(l.disk_total)),1)]),_:1})]),_:1})]),_:1}),t(w,{style:{"margin-top":"20px"}},{default:e(()=>[t(v,{span:24},{default:e(()=>[t(_,{shadow:"hover"},{header:e(()=>[o("div",W,[a[5]||(a[5]=o("span",null,"显卡信息",-1)),k.value&&g.value.length===0?(c(),F(M,{key:0,type:"info",size:"small"},{default:e(()=>[...a[4]||(a[4]=[i("未检测到显卡",-1)])]),_:1})):D("",!0)])]),default:e(()=>[b.value?K((c(),f("div",X,null,512)),[[G,!0]]):g.value.length>0?(c(),f("div",Y,[(c(!0),f(O,null,q(g.value,(r,L)=>(c(),f("div",{key:L,class:"gpu-item"},[o("div",Z,[t(M,{type:r.type==="discrete"?"danger":r.type==="integrated"?"warning":"info",size:"small",effect:"dark"},{default:e(()=>[i(s(r.type_label),1)]),_:2},1032,["type"]),o("span",$,s(r.name),1)]),t(C,{column:3,size:"small",border:"",style:{"margin-top":"8px"}},{default:e(()=>[t(p,{label:"显存"},{default:e(()=>[i(s(r.vram>0?u(r.vram):"共享内存"),1)]),_:2},1024),t(p,{label:"驱动版本"},{default:e(()=>[i(s(r.driver_ver||"-"),1)]),_:2},1024),t(p,{label:"分辨率"},{default:e(()=>[i(s(r.resolution||"-"),1)]),_:2},1024)]),_:2},1024),r.vram>0?(c(),f("div",ee,[a[6]||(a[6]=o("span",{class:"stat-text"},"显存容量",-1)),t(m,{percentage:100,"stroke-width":16,format:()=>u(r.vram),color:r.type==="discrete"?"#f56c6c":"#e6a23c"},null,8,["format","color"])])):D("",!0)]))),128))])):(c(),F(N,{key:2,description:"未检测到显卡设备","image-size":60}))]),_:1})]),_:1})]),_:1}),t(w,{style:{"margin-top":"20px"}},{default:e(()=>[t(v,{span:24},{default:e(()=>[t(_,{shadow:"hover"},{header:e(()=>[...a[7]||(a[7]=[o("span",null,"系统信息",-1)])]),default:e(()=>[t(C,{column:2,border:""},{default:e(()=>[t(p,{label:"主机名"},{default:e(()=>[i(s(l.hostname),1)]),_:1}),t(p,{label:"操作系统"},{default:e(()=>[i(s(l.os),1)]),_:1}),t(p,{label:"公网 IP"},{default:e(()=>[i(s(l.public_ip||"获取中..."),1)]),_:1}),t(p,{label:"归属地"},{default:e(()=>[i(s(l.ip_location||"-"),1)]),_:1}),t(p,{label:"运营商"},{default:e(()=>[i(s(l.ip_operator||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o("div",te,[t(E,{type:"primary",loading:y.value,onClick:B},{default:e(()=>[t(V,null,{default:e(()=>[t(P)]),_:1}),a[8]||(a[8]=i(" 刷新 ",-1))]),_:1},8,["loading"])])])}}}),ne=A(ae,[["__scopeId","data-v-d2b866d7"]]);export{ne as default};
