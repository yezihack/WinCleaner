import{m as se,r as ze,n as Ee,f as oe,_ as L,g as m,h as Oe,j as ue,k as Ve,l as he,o as q,E as ke,p as Re,q as Z,t as De,v as de,w as x,M as We,S as ne,C as Be,x as He,y as Ne,z as S,A as Ge,B as Ye,D as Xe,F as Fe,G,H as Ie,I as Ze,J as fe,K as w,L as Ue,N as ce,O as $e,P as Ke,Q as qe,R as $,T as Je,U as pe,V as ve,W as Qe,Z as je,X as et,Y as tt,$ as rt,a0 as ge,a1 as at,a2 as it,a3 as ot,a4 as nt,u as me}from"./index-DWTZmJt_.js";var st=se();function ye(n,r){return!!st(n)[r]}ze({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Ee);var lt={axisPointer:1,tooltip:1,brush:1};function ut(n,r,e){var t=r.getComponentByElement(n.topTarget);if(!t||t===e||lt.hasOwnProperty(t.mainType))return!1;var i=t.coordinateSystem;if(!i||i.model===e)return!1;var a=oe(t),o=oe(e);return!((a.zlevel-o.zlevel||a.z-o.z)<=0)}var ht=function(n){L(r,n);function r(e){var t=n.call(this)||this;t._zr=e;var i=m(t._mousedownHandler,t),a=m(t._mousemoveHandler,t),o=m(t._mouseupHandler,t),s=m(t._mousewheelHandler,t),l=m(t._pinchHandler,t);return t.enable=function(u,h){var d=h.zInfo,f=oe(d.component),c=f.z,p=f.zlevel,v={component:d.component,z:c,zlevel:p,z2:Oe(d.z2,-1/0)},g=ue({},h.triggerInfo);this._opt=Ve(ue({},h),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:v,triggerInfo:g}),u==null&&(u=!0),(!this._enabled||this._controlType!==u)&&(this._enabled=!0,this.disable(),(u===!0||u==="move"||u==="pan")&&(W(e,"mousedown",i,v),W(e,"mousemove",a,v),W(e,"mouseup",o,v)),(u===!0||u==="scale"||u==="zoom")&&(W(e,"mousewheel",s,v),W(e,"pinch",l,v)))},t.disable=function(){this._enabled=!1,B(e,"mousedown",i),B(e,"mousemove",a),B(e,"mouseup",o),B(e,"mousewheel",s),B(e,"pinch",l)},t}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype._checkPointer=function(e,t,i){var a=this._opt,o=a.zInfoParsed;if(ut(e,a.api,o.component))return!1;var s=a.triggerInfo,l=s.roamTrigger,u=!1;return l==="global"&&(u=!0),u||(u=s.isInSelf(e,t,i)),u&&s.isInClip&&!s.isInClip(e,t,i)&&(u=!1),u},r.prototype._decideCursorStyle=function(e,t,i,a){var o=e.target;if(!o&&this._checkPointer(e,t,i))return"grab";if(a)return o&&o.cursor||"default"},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(e){if(!(he(e)||k(e))){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var i=e.offsetX,a=e.offsetY;this._checkPointer(e,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},r.prototype._mousemoveHandler=function(e){var t=this._zr;if(!(e.gestureEvent==="pinch"||ye(t,"globalPan")||k(e))){var i=e.offsetX,a=e.offsetY;if(!this._dragging||!K("moveOnMouseMove",e,this._opt)){var o=this._decideCursorStyle(e,i,a,!1);o&&t.setCursorStyle(o);return}t.setCursorStyle("grabbing");var s=this._x,l=this._y,u=i-s,h=a-l;this._x=i,this._y=a,this._opt.preventDefaultMouseMove&&q(e.event),e.__ecRoamConsumed=!0,_e(this,"pan","moveOnMouseMove",e,{dx:u,dy:h,oldX:s,oldY:l,newX:i,newY:a,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(e){if(!k(e)){var t=this._zr;if(!he(e)){this._dragging=!1;var i=this._decideCursorStyle(e,e.offsetX,e.offsetY,!0);i&&t.setCursorStyle(i)}}},r.prototype._mousewheelHandler=function(e){if(!k(e)){var t=K("zoomOnMouseWheel",e,this._opt),i=K("moveOnMouseWheel",e,this._opt),a=e.wheelDelta,o=Math.abs(a),s=e.offsetX,l=e.offsetY;if(!(a===0||!t&&!i)){if(t){var u=o>3?1.4:o>1?1.2:1.1,h=a>0?u:1/u;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",e,{scale:h,originX:s,originY:l,isAvailableBehavior:null})}if(i){var d=Math.abs(a),f=(a>0?1:-1)*(d>3?.4:d>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:f,originX:s,originY:l,isAvailableBehavior:null})}}}},r.prototype._pinchHandler=function(e){if(!(ye(this._zr,"globalPan")||k(e))){var t=e.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,e,{scale:t,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},r.prototype._checkTriggerMoveZoom=function(e,t,i,a,o){e._checkPointer(a,o.originX,o.originY)&&(q(a.event),a.__ecRoamConsumed=!0,_e(e,t,i,a,o))},r}(ke);function k(n){return n.__ecRoamConsumed}var dt=se();function Q(n){var r=dt(n);return r.roam=r.roam||{},r.uniform=r.uniform||{},r}function W(n,r,e,t){for(var i=Q(n),a=i.roam,o=a[r]=a[r]||[],s=0;s<o.length;s++){var l=o[s].zInfoParsed;if((l.zlevel-t.zlevel||l.z-t.z||l.z2-t.z2)<=0)break}o.splice(s,0,{listener:e,zInfoParsed:t}),ft(n,r)}function B(n,r,e){for(var t=Q(n),i=t.roam[r]||[],a=0;a<i.length;a++)if(i[a].listener===e){i.splice(a,1),i.length||ct(n,r);return}}function ft(n,r){var e=Q(n);e.uniform[r]||n.on(r,e.uniform[r]=function(t){var i=e.roam[r];if(i)for(var a=0;a<i.length;a++)i[a].listener(t)})}function ct(n,r){var e=Q(n),t=e.uniform;t[r]&&(n.off(r,t[r]),t[r]=null)}function _e(n,r,e,t,i){i.isAvailableBehavior=m(K,null,e,t),n.trigger(r,i)}function K(n,r,e){var t=e[n];return!n||t&&(!Re(t)||r.event[t+"Key"])}function Y(n,r,e,t,i,a){n=n||0;var o=e[1]-e[0];if(i!=null&&(i=C(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),t==="all"){var s=Math.abs(r[1]-r[0]);s=C(s,[0,o]),i=a=C(s,[i,a]),t=0}r[0]=C(r[0],e),r[1]=C(r[1],e);var l=ee(r,t);r[t]+=n;var u=i||0,h=e.slice();l.sign<0?h[0]+=u:h[1]-=u,r[t]=C(r[t],h);var d;return d=ee(r,t),i!=null&&(d.sign!==l.sign||d.span<i)&&(r[1-t]=r[t]+l.sign*i),d=ee(r,t),a!=null&&d.span>a&&(r[1-t]=r[t]+d.sign*a),r}function ee(n,r){var e=n[r]-n[1-r];return{span:Math.abs(e),sign:e>0?-1:e<0?1:r?-1:1}}function C(n,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,n))}var Me=["x","y","radius","angle","single"],pt=["cartesian2d","polar","singleAxis"];function vt(n){var r=n.get("coordinateSystem");return De(pt,r)>=0}function R(n){return n+"Axis"}function gt(n,r){var e=Z(),t=[],i=Z();n.eachComponent({mainType:"dataZoom",query:r},function(h){i.get(h.uid)||s(h)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(h){!i.get(h.uid)&&l(h)&&(s(h),a=!0)}function s(h){i.set(h.uid,!0),t.push(h),u(h)}function l(h){var d=!1;return h.eachTargetAxis(function(f,c){var p=e.get(f);p&&p[c]&&(d=!0)}),d}function u(h){h.eachTargetAxis(function(d,f){(e.get(d)||e.set(d,[]))[f]=!0})}return t}function Le(n){var r=n.ecModel,e={infoList:[],infoMap:Z()};return n.eachTargetAxis(function(t,i){var a=r.getComponent(R(t),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=e.infoMap.get(s);l||(l={model:o,axisModels:[]},e.infoList.push(l),e.infoMap.set(s,l)),l.axisModels.push(a)}}}),e}var te=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},n}(),J=function(n){L(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return r.prototype.init=function(e,t,i){var a=xe(e);this.settledOption=a,this.mergeDefaultAndTheme(e,i),this._doInit(a)},r.prototype.mergeOption=function(e){var t=xe(e);de(this.option,e,!0),de(this.settledOption,t,!0),this._doInit(t)},r.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var i=this.settledOption;x([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(t[a[0]]=i[a[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=Z(),i=this._fillSpecifiedTargetAxis(t);i?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return x(Me,function(i){var a=this.getReferringComponents(R(i),We);if(a.specified){t=!0;var o=new te;x(a.models,function(s){o.add(s.componentIndex)}),e.set(i,o)}},this),t},r.prototype._fillAutoTargetAxisByOrient=function(e,t){var i=this.ecModel,a=!0;if(a){var o=t==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(h){return h.get("orient",!0)===t}});l(s,"single")}function l(u,h){var d=u[0];if(d){var f=new te;if(f.add(d.componentIndex),e.set(h,f),a=!1,h==="x"||h==="y"){var c=d.getReferringComponents("grid",ne).models[0];c&&x(u,function(p){d.componentIndex!==p.componentIndex&&c===p.getReferringComponents("grid",ne).models[0]&&f.add(p.componentIndex)})}}}a&&x(Me,function(u){if(a){var h=i.findComponents({mainType:R(u),filter:function(f){return f.get("type",!0)==="category"}});if(h[0]){var d=new te;d.add(h[0].componentIndex),e.set(u,d),a=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(t){!e&&(e=t)},this),e==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(e){var t=this._rangePropMode,i=this.get("rangeMode");x([["start","startValue"],["end","endValue"]],function(a,o){var s=e[a[0]]!=null,l=e[a[1]]!=null;s&&!l?t[o]="percent":!s&&l?t[o]="value":i?t[o]=i[o]:s&&(t[o]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(t,i){e==null&&(e=this.ecModel.getComponent(R(t),i))},this),e},r.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each(function(i,a){x(i.indexList,function(o){e.call(t,a,o)})})},r.prototype.getAxisProxy=function(e,t){var i=this.getAxisModel(e,t);if(i)return i.__dzAxisProxy},r.prototype.getAxisModel=function(e,t){var i=this._targetAxisInfoMap.get(e);if(i&&i.indexMap[t])return this.ecModel.getComponent(R(e),t)},r.prototype.setRawRange=function(e){var t=this.option,i=this.settledOption;x([["start","startValue"],["end","endValue"]],function(a){(e[a[0]]!=null||e[a[1]]!=null)&&(t[a[0]]=i[a[0]]=e[a[0]],t[a[1]]=i[a[1]]=e[a[1]])},this),this._updateRangeUse(e)},r.prototype.setCalculatedRange=function(e){var t=this.option;x(["start","startValue","end","endValue"],function(i){t[i]=e[i]})},r.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},r.prototype.getValueRange=function(e,t){if(e==null&&t==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(e,t).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;t||(t=u)}return t},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(Be);function xe(n){var r={};return x(["start","end","startValue","endValue","throttle"],function(e){n.hasOwnProperty(e)&&(r[e]=n[e])}),r}var Te=function(n){L(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,t,i,a){this.dataZoomModel=e,this.ecModel=t,this.api=i},r.type="dataZoom",r}(He),P=x,Se=G,mt=function(){function n(r,e,t,i){this._dimName=r,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=t}return n.prototype.hostedBy=function(r){return this._dataZoomModel===r},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(e){if(vt(e)){var t=R(this._dimName),i=e.getReferringComponents(t,ne).models[0];i&&this._axisIndex===i.componentIndex&&r.push(e)}},this),r},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return Ne(this._minMaxSpan)},n.prototype.calculateDataWindow=function(r){var e=this._dataExtent,t=this.getAxisModel(),i=t.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;P(["start","end"],function(f,c){var p=r[f],v=r[f+"Value"];a[c]==="percent"?(p==null&&(p=o[c]),v=i.parse(S(p,o,e))):(u=!0,v=v==null?e[c]:i.parse(v),p=S(v,e,o)),l[c]=v==null||isNaN(v)?e[c]:v,s[c]=p==null||isNaN(p)?o[c]:p}),Se(l),Se(s);var h=this._minMaxSpan;u?d(l,s,e,o,!1):d(s,l,o,e,!0);function d(f,c,p,v,g){var y=g?"Span":"ValueSpan";Y(0,f,p,"all",h["min"+y],h["max"+y]);for(var _=0;_<2;_++)c[_]=S(f[_],p,v,!0),g&&(c[_]=i.parse(c[_]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(r){if(r===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=yt(this,this._dimName,e),this._updateMinMaxSpan();var t=this.calculateDataWindow(r.settledOption);this._valueWindow=t.valueWindow,this._percentWindow=t.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(r,e){if(r!==this._dataZoomModel)return;var t=this._dimName,i=this.getTargetSeriesModels(),a=r.get("filterMode"),o=this._valueWindow;if(a==="none")return;P(i,function(l){var u=l.getData(),h=u.mapDimensionsAll(t);if(h.length){if(a==="weakFilter"){var d=u.getStore(),f=Ge(h,function(c){return u.getDimensionIndex(c)},u);u.filterSelf(function(c){for(var p,v,g,y=0;y<h.length;y++){var _=d.get(f[y],c),b=!isNaN(_),A=_<o[0],M=_>o[1];if(b&&!A&&!M)return!0;b&&(g=!0),A&&(p=!0),M&&(v=!0)}return g&&p&&v})}else P(h,function(c){if(a==="empty")l.setData(u=u.map(c,function(v){return s(v)?v:NaN}));else{var p={};p[c]=o,u.selectRange(p)}});P(h,function(c){u.setApproximateExtent(o,c)})}});function s(l){return l>=o[0]&&l<=o[1]}},n.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},e=this._dataZoomModel,t=this._dataExtent;P(["min","max"],function(i){var a=e.get(i+"Span"),o=e.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=S(t[0]+o,t,[0,100],!0):a!=null&&(o=S(a,[0,100],t,!0)-t[0]),r[i+"Span"]=a,r[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var r=this.getAxisModel(),e=this._percentWindow,t=this._valueWindow;if(e){var i=Ye(t,[0,500]);i=Math.min(i,20);var a=r.axis.scale.rawExtentInfo;e[0]!==0&&a.setDeterminedMinMax("min",+t[0].toFixed(i)),e[1]!==100&&a.setDeterminedMinMax("max",+t[1].toFixed(i)),a.freeze()}},n}();function yt(n,r,e){var t=[1/0,-1/0];P(e,function(o){Xe(t,o.getData(),r)});var i=n.getAxisModel(),a=Fe(i.axis.scale,i,t).calculate();return[a.min,a.max]}var _t={getTargetSeries:function(n){function r(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=n.getComponent(R(o),s);i(o,s,l,a)})})}r(function(i,a,o,s){o.__dzAxisProxy=null});var e=[];r(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new mt(i,a,s,n),e.push(o.__dzAxisProxy))});var t=Z();return x(e,function(i){x(i.getTargetSeriesModels(),function(a){t.set(a.uid,a)})}),t},overallReset:function(n,r){n.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(t,i){e.getAxisProxy(t,i).reset(e)}),e.eachTargetAxis(function(t,i){e.getAxisProxy(t,i).filterData(e,r)})}),n.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy();if(t){var i=t.getDataPercentWindow(),a=t.getDataValueWindow();e.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function Mt(n){n.registerAction("dataZoom",function(r,e){var t=gt(e,r);x(t,function(i){i.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var we=!1;function Ce(n){we||(we=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,_t),Mt(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}var xt=function(n){L(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.inside",r.defaultOption=Ie(J.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(J),le=se();function St(n,r,e){le(n).coordSysRecordMap.each(function(t){var i=t.dataZoomInfoMap.get(r.uid);i&&(i.getRange=e)})}function wt(n,r){for(var e=le(n).coordSysRecordMap,t=e.keys(),i=0;i<t.length;i++){var a=t[i],o=e.get(a),s=o.dataZoomInfoMap;if(s){var l=r.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||Pe(e,o))}}}function Pe(n,r){if(r){n.removeKey(r.model.uid);var e=r.controller;e&&e.dispose()}}function At(n,r){var e={model:r,containsPoint:fe(Rt,r),dispatchAction:fe(bt,n),dataZoomInfoMap:null,controller:null},t=e.controller=new ht(n.getZr());return x(["pan","zoom","scrollMove"],function(i){t.on(i,function(a){var o=[];e.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],u=l&&l(s.dzReferCoordSysInfo,e.model.mainType,e.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&e.dispatchAction(o)})}),e}function bt(n,r){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function Rt(n,r,e,t){return n.coordinateSystem.containPoint([e,t])}function Dt(n,r,e){var t,i="type_",a={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return n.each(function(s){var l=s.model,u=l.get("disabled",!0)?!1:l.get("zoomLock",!0)?"move":!0;a[i+u]>a[i+t]&&(t=u),o=o&&l.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o,api:e,zInfo:{component:r.model},triggerInfo:{roamTrigger:null,isInSelf:r.containsPoint}}}}function It(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(r,e){var t=le(e),i=t.coordSysRecordMap||(t.coordSysRecordMap=Z());i.each(function(a){a.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=Le(a);x(o.infoList,function(s){var l=s.model.uid,u=i.get(l)||i.set(l,At(e,s.model)),h=u.dataZoomInfoMap||(u.dataZoomInfoMap=Z());h.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){Pe(i,a);return}var h=Dt(l,a,e);o.enable(h.controlType,h.opt),Ze(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var Zt=function(n){L(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return r.prototype.render=function(e,t,i){if(n.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),St(i,e,{pan:m(re.pan,this),zoom:m(re.zoom,this),scrollMove:m(re.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){wt(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(Te),re={zoom:function(n,r,e,t){var i=this.range,a=i.slice(),o=n.axisModels[0];if(o){var s=ae[r](null,[t.originX,t.originY],o,e,n),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/t.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Y(0,a,[0,100],0,h.minSpan,h.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:Ae(function(n,r,e,t,i,a){var o=ae[t]([a.oldX,a.oldY],[a.newX,a.newY],r,i,e);return o.signal*(n[1]-n[0])*o.pixel/o.pixelLength}),scrollMove:Ae(function(n,r,e,t,i,a){var o=ae[t]([0,0],[a.scrollDelta,a.scrollDelta],r,i,e);return o.signal*(n[1]-n[0])*a.scrollDelta})};function Ae(n){return function(r,e,t,i){var a=this.range,o=a.slice(),s=r.axisModels[0];if(s){var l=n(o,s,r,e,t,i);if(Y(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var ae={grid:function(n,r,e,t,i){var a=e.axis,o={},s=i.model.coordinateSystem.getRect();return n=n||[0,0],a.dim==="x"?(o.pixel=r[0]-n[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=r[1]-n[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(n,r,e,t,i){var a=e.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return n=n?s.pointToCoord(n):[0,0],r=s.pointToCoord(r),e.mainType==="radiusAxis"?(o.pixel=r[0]-n[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=r[1]-n[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(n,r,e,t,i){var a=e.axis,o=i.model.coordinateSystem.getRect(),s={};return n=n||[0,0],a.orient==="horizontal"?(s.pixel=r[0]-n[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=r[1]-n[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function Lt(n){Ce(n),n.registerComponentModel(xt),n.registerComponentView(Zt),It(n)}var Tt=function(n){L(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=Ie(J.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:w.color.accent10,borderRadius:0,backgroundColor:w.color.transparent,dataBackground:{lineStyle:{color:w.color.accent30,width:.5},areaStyle:{color:w.color.accent20,opacity:.2}},selectedDataBackground:{lineStyle:{color:w.color.accent40,width:.5},areaStyle:{color:w.color.accent20,opacity:.3}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:w.color.neutral00,borderColor:w.color.accent20},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:w.color.accent40,opacity:.5},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:w.color.tertiary},brushSelect:!0,brushStyle:{color:w.color.accent30,opacity:.3},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:w.color.accent40},moveHandleStyle:{opacity:.8}},defaultLocationEdgeGap:15}),r}(J),H=$,Ct=1,ie=30,Pt=7,N="horizontal",be="vertical",zt=5,Et=["line","bar","candlestick","scatter"],Ot={easing:"cubicOut",duration:100,delay:0},Vt=function(n){L(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._displayables={},e}return r.prototype.init=function(e,t){this.api=t,this._onBrush=m(this._onBrush,this),this._onBrushEnd=m(this._onBrushEnd,this)},r.prototype.render=function(e,t,i,a){if(n.prototype.render.apply(this,arguments),Ze(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Ue(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new ce;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},r.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,i=e.get("brushSelect"),a=i?Pt:0,o=$e(e,t).refContainer,s=this._findCoordRect(),l=e.get("defaultLocationEdgeGap",!0)||0,u=this._orient===N?{right:o.width-s.x-s.width,top:o.height-ie-l-a,width:s.width,height:ie}:{right:l,top:s.y,width:ie,height:s.height},h=Ke(e.option);x(["right","top","width","height"],function(f){h[f]==="ph"&&(h[f]=u[f])});var d=qe(h,o);this._location={x:d.x,y:d.y},this._size=[d.width,d.height],this._orient===be&&this._size.reverse()},r.prototype._positionGroup=function(){var e=this.group,t=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===N&&!o?{scaleY:l?1:-1,scaleX:1}:i===N&&o?{scaleY:l?1:-1,scaleX:-1}:i===be&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=e.getBoundingRect([s]);e.x=t.x-u.x,e.y=t.y-u.y,e.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,i=this._displayables.sliderGroup,a=e.get("brushSelect");i.add(new H({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new H({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:m(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},r.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var t=this._size,i=this._shadowSize||[],a=e.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():e.otherDim;if(l==null)return;var u=this._shadowPolygonPts,h=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||t[0]!==i[0]||t[1]!==i[1]){var d=o.getDataExtent(e.thisDim),f=o.getDataExtent(l),c=(f[1]-f[0])*.3;f=[f[0]-c,f[1]+c];var p=[0,t[1]],v=[0,t[0]],g=[[t[0],0],[0,0]],y=[],_=v[1]/Math.max(1,o.count()-1),b=t[0]/(d[1]-d[0]),A=e.thisAxis.type==="time",M=-_,z=Math.round(o.count()/t[0]),E;o.each([e.thisDim,l],function(j,D,T){if(z>0&&T%z){A||(M+=_);return}M=A?(+j-d[0])*b:M+_;var I=D==null||isNaN(D)||D==="",U=I?0:S(D,f,p,!0);I&&!E&&T?(g.push([g[g.length-1][0],0]),y.push([y[y.length-1][0],0])):!I&&E&&(g.push([M,0]),y.push([M,0])),I||(g.push([M,U]),y.push([M,U])),E=I}),u=this._shadowPolygonPts=g,h=this._shadowPolylinePts=y}this._shadowData=o,this._shadowDim=l,this._shadowSize=[t[0],t[1]];var X=this.dataZoomModel;function O(j){var D=X.getModel(j?"selectedDataBackground":"dataBackground"),T=new ce,I=new ot({shape:{points:u},segmentIgnoreThreshold:1,style:D.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),U=new nt({shape:{points:h},segmentIgnoreThreshold:1,style:D.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return T.add(I),T.add(U),T}for(var V=0;V<3;V++){var F=O(V===1);this._displayables.sliderGroup.add(F),this._displayables.dataShadowSegs.push(F)}},r.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(t!==!1){var i,a=this.ecModel;return e.eachTargetAxis(function(o,s){var l=e.getAxisProxy(o,s).getTargetSeriesModels();x(l,function(u){if(!i&&!(t!==!0&&De(Et,u.get("type"))<0)){var h=a.getComponent(R(o),s).axis,d=kt(o),f,c=u.coordinateSystem;d!=null&&c.getOtherAxis&&(f=c.getOtherAxis(h).inverse),d=u.getData().mapDimension(d);var p=u.getData().mapDimension(o);i={thisAxis:h,series:u,thisDim:p,otherDim:d,otherAxisInverse:f}}},this)},this),i}},r.prototype._renderHandle=function(){var e=this.group,t=this._displayables,i=t.handles=[null,null],a=t.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,h=l.get("borderRadius")||0,d=l.get("brushSelect"),f=t.filler=new H({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(f),o.add(new H({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:h},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Ct,fill:w.color.transparent}})),x([0,1],function(b){var A=l.get("handleIcon");!Je[A]&&A.indexOf("path://")<0&&A.indexOf("image://")<0&&(A="path://"+A);var M=pe(A,-1,0,2,2,null,!0);M.attr({cursor:Wt(this._orient),draggable:!0,drift:m(this._onDragMove,this,b),ondragend:m(this._onDragEnd,this),onmouseover:m(this._showDataInfo,this,!0),onmouseout:m(this._showDataInfo,this,!1),z2:5});var z=M.getBoundingRect(),E=l.get("handleSize");this._handleHeight=ve(E,this._size[1]),this._handleWidth=z.width/z.height*this._handleHeight,M.setStyle(l.getModel("handleStyle").getItemStyle()),M.style.strokeNoScale=!0,M.rectHover=!0,M.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Qe(M);var X=l.get("handleColor");X!=null&&(M.style.fill=X),o.add(i[b]=M);var O=l.getModel("textStyle"),V=l.get("handleLabel")||{},F=V.show||!1;e.add(a[b]=new je({silent:!0,invisible:!F,style:et(O,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:O.getTextColor(),font:O.getFont()}),z2:10}))},this);var c=f;if(d){var p=ve(l.get("moveHandleSize"),s[1]),v=t.moveHandle=new $({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),g=p*.8,y=t.moveHandleIcon=pe(l.get("moveHandleIcon"),-g/2,-g/2,g,g,w.color.neutral00,!0);y.silent=!0,y.y=s[1]+p/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _=Math.min(s[1]/2,Math.max(p,10));c=t.moveZone=new $({invisible:!0,shape:{y:s[1]-_,height:p+_}}),c.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),o.add(v),o.add(y),o.add(c)}c.attr({draggable:!0,cursor:"default",drift:m(this._onDragMove,this,"all"),ondragstart:m(this._showDataInfo,this,!0),ondragend:m(this._onDragEnd,this),onmouseover:m(this._showDataInfo,this,!0),onmouseout:m(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[S(e[0],[0,100],t,!0),S(e[1],[0,100],t,!0)]},r.prototype._updateInterval=function(e,t){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Y(t,a,o,i.get("zoomLock")?"all":e,s.minSpan!=null?S(s.minSpan,l,o,!0):null,s.maxSpan!=null?S(s.maxSpan,l,o,!0):null);var u=this._range,h=this._range=G([S(a[0],o,l,!0),S(a[1],o,l,!0)]);return!u||u[0]!==h[0]||u[1]!==h[1]},r.prototype._updateView=function(e){var t=this._displayables,i=this._handleEnds,a=G(i.slice()),o=this._size;x([0,1],function(c){var p=t.handles[c],v=this._handleHeight;p.attr({scaleX:v/2,scaleY:v/2,x:i[c]+(c?-1:1),y:o[1]/2-v/2})},this),t.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};t.moveHandle&&(t.moveHandle.setShape(s),t.moveZone.setShape(s),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=t.dataShadowSegs,u=[0,a[0],a[1],o[0]],h=0;h<l.length;h++){var d=l[h],f=d.getClipPath();f||(f=new $,d.setClipPath(f)),f.setShape({x:u[h],y:0,width:u[h+1]-u[h],height:o[1]})}this._updateDataInfo(e)},r.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(t.get("showDetail")){var l=t.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,h=this._range,d=e?l.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],u),this._formatLabel(d[1],u)]}}var f=G(this._handleEnds.slice());c.call(this,0),c.call(this,1);function c(p){var v=tt(i.handles[p].parent,this.group),g=rt(p===0?"right":"left",v),y=this._handleWidth/2+zt,_=ge([f[p]+(p===0?-y:y),this._size[1]/2],v);a[p].setStyle({x:_[0],y:_[1],verticalAlign:o===N?"middle":g,align:o===N?g:"center",text:s[p]})}},r.prototype._formatLabel=function(e,t){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=t.getPixelPrecision());var s=e==null||isNaN(e)?"":t.type==="category"||t.type==="time"?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return at(a)?a(e,s):Re(a)?a.replace("{value}",s):s},r.prototype._showDataInfo=function(e){var t=this.dataZoomModel.get("handleLabel")||{},i=t.show||!1,a=this.dataZoomModel.getModel(["emphasis","handleLabel"]),o=a.get("show")||!1,s=e||this._dragging?o:i,l=this._displayables,u=l.handleLabels;u[0].attr("invisible",!s),u[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},r.prototype._onDragMove=function(e,t,i,a){this._dragging=!0,q(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=ge([t,i],o,!0),l=this._updateInterval(e,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(e){var t=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(i[0]<0||i[0]>t[0]||i[1]<0||i[1]>t[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(e){var t=e.offsetX,i=e.offsetY;this._brushStart=new it(t,i),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,!!t){t.attr("ignore",!0);var i=t.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100],l=this._handleEnds=[i.x,i.x+i.width],u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();Y(0,l,o,0,u.minSpan!=null?S(u.minSpan,s,o,!0):null,u.maxSpan!=null?S(u.maxSpan,s,o,!0):null),this._range=G([S(l[0],o,s,!0),S(l[1],o,s,!0)]),this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(e){this._brushing&&(q(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},r.prototype._updateBrushRect=function(e,t){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new H({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(e,t),h=l.transformCoordToLocal(s.x,s.y),d=this._size;u[0]=Math.max(Math.min(d[0],u[0]),0),o.setShape({x:h[0],y:0,width:u[0]-h[0],height:d[1]})},r.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?Ot:null,start:t[0],end:t[1]})},r.prototype._findCoordRect=function(){var e,t=Le(this.dataZoomModel).infoList;if(!e&&t.length){var i=t[0].model.coordinateSystem;e=i.getRect&&i.getRect()}if(!e){var a=this.api.getWidth(),o=this.api.getHeight();e={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return e},r.type="dataZoom.slider",r}(Te);function kt(n){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[n]}function Wt(n){return n==="vertical"?"ns-resize":"ew-resize"}function Bt(n){n.registerComponentModel(Tt),n.registerComponentView(Vt),Ce(n)}function Nt(n){me(Lt),me(Bt)}export{Nt as i};
