import{d as K,o as P,v as j,c as E,a as l,b as a,w as o,e as M,f as i,r as $,g as V,h as G,t as c,u as _,l as y,s as W,p as b}from"./index-CeN3S9B-.js";import{u as q,i as H,a as J,b as Q,c as X,d as Y,e as Z,s as B}from"./index-DWTZmJt_.js";import{i as tt}from"./install-BTFENKLp.js";import{i as et}from"./install-BKa6yPLF.js";import{i as at}from"./install-A2hVvJB5.js";import{_ as ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";const st={class:"network"},lt={class:"stat-value"},rt={class:"stat-value"},nt={class:"stat-value"},it={class:"stat-value"},dt={class:"card-header"},ut={class:"card-header"},ct={class:"header-actions"},pt={class:"traffic-up"},ft={class:"traffic-down"},mt=K({__name:"Network",setup(vt){q([H,et,tt,J,Q,X,Y,at,Z]);const g=$(!1),h=$(""),v=$("daily"),p=V({overview:{total_sent:0,total_recv:0,up_speed:0,down_speed:0},processes:[]}),u=V({daily_stats:[],monthly_stats:[],yearly_stats:[],total_sent:0,total_recv:0});let w=null;const C=b(()=>{const e=h.value.toLowerCase(),t=p.processes||[];return e?t.filter(s=>s.name.toLowerCase().includes(e)):t}),f=e=>+(e/1024/1024).toFixed(2),d=e=>{if(!e||e===0)return"0 B";const t=1024,s=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(1))+" "+s[r]},k=e=>!e||e===0?"0 B/s":e<1024?e+" B/s":e<1024*1024?(e/1024).toFixed(1)+" KB/s":(e/1024/1024).toFixed(1)+" MB/s",L=b(()=>{let e=[];return v.value==="daily"?e=(u.daily_stats||[]).map(t=>({label:t.date.slice(5),sent:t.sent,recv:t.recv})):v.value==="monthly"?e=(u.monthly_stats||[]).map(t=>({label:t.month,sent:t.sent,recv:t.recv})):e=(u.yearly_stats||[]).map(t=>({label:t.year,sent:t.sent,recv:t.recv})),{tooltip:{trigger:"axis",formatter:t=>{const s=t[0],r=t[1];return`${s.axisValue}<br/>${s.marker} ä¸Šä¼ : ${d(s.value*1024*1024)}<br/>${r.marker} ä¸‹è½½: ${d(r.value*1024*1024)}`}},legend:{data:["ä¸Šä¼ ","ä¸‹è½½"],bottom:0},grid:{left:50,right:20,top:20,bottom:40},xAxis:{type:"category",data:e.map(t=>t.label),axisLabel:{fontSize:11}},yAxis:{type:"value",name:"MB",axisLabel:{fontSize:11}},series:[{name:"ä¸Šä¼ ",type:"line",smooth:!0,data:e.map(t=>f(t.sent)),areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(103,194,58,0.4)"},{offset:1,color:"rgba(103,194,58,0.05)"}]}},lineStyle:{color:"#67c23a",width:2},itemStyle:{color:"#67c23a"}},{name:"ä¸‹è½½",type:"line",smooth:!0,data:e.map(t=>f(t.recv)),areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64,158,255,0.4)"},{offset:1,color:"rgba(64,158,255,0.05)"}]}},lineStyle:{color:"#409eff",width:2},itemStyle:{color:"#409eff"}}]}}),N=b(()=>{const e=u.total_sent||0,t=u.total_recv||0;return{tooltip:{trigger:"item",formatter:s=>`${s.name}: ${d(s.value*1024*1024)} (${s.percent}%)`},legend:{bottom:0,data:["ä¸Šä¼ ","ä¸‹è½½"]},series:[{type:"pie",radius:["40%","70%"],center:["50%","45%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:8,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:`{b}
{d}%`,fontSize:12},data:[{value:f(e),name:"ä¸Šä¼ ",itemStyle:{color:"#67c23a"}},{value:f(t),name:"ä¸‹è½½",itemStyle:{color:"#409eff"}}]}]}}),F=b(()=>{const e=(u.daily_stats||[]).slice(-14);return{tooltip:{trigger:"axis",formatter:t=>{const s=t[0],r=t[1];return`${s.axisValue}<br/>${s.marker} ä¸Šä¼ : ${d(s.value*1024*1024)}<br/>${r.marker} ä¸‹è½½: ${d(r.value*1024*1024)}`}},legend:{data:["ä¸Šä¼ ","ä¸‹è½½"],bottom:0},grid:{left:50,right:20,top:16,bottom:40},xAxis:{type:"category",data:e.map(t=>t.date.slice(5)),axisLabel:{fontSize:11}},yAxis:{type:"value",name:"MB",axisLabel:{fontSize:11}},series:[{name:"ä¸Šä¼ ",type:"bar",stack:"total",data:e.map(t=>f(t.sent)),itemStyle:{color:"#67c23a",borderRadius:[4,4,0,0]}},{name:"ä¸‹è½½",type:"bar",stack:"total",data:e.map(t=>f(t.recv)),itemStyle:{color:"#409eff",borderRadius:[4,4,0,0]}}]}}),x=async()=>{g.value=!0;try{const e=await M.getNetTraffic();p.overview=e.overview||p.overview,p.processes=e.processes||[]}catch{}finally{g.value=!1}},O=async()=>{try{const e=await M.getNetTrafficStats();Object.assign(u,e)}catch{}};return P(()=>{x(),O(),w=setInterval(x,5e3)}),j(()=>{w&&clearInterval(w)}),(e,t)=>{const s=i("el-card"),r=i("el-col"),z=i("el-row"),S=i("el-radio-button"),R=i("el-radio-group"),A=i("el-input"),I=i("Refresh"),T=i("el-icon"),U=i("el-button"),m=i("el-table-column"),D=i("el-table");return G(),E("div",st,[t[17]||(t[17]=l("h2",{style:{"margin-bottom":"20px",color:"#303133"}},"æµé‡ç›‘æŽ§",-1)),a(z,{gutter:16},{default:o(()=>[a(r,{span:6},{default:o(()=>[a(s,{shadow:"hover",class:"stat-card gradient-up"},{default:o(()=>[t[2]||(t[2]=l("div",{class:"stat-icon"},"â†‘",-1)),l("div",lt,c(k(p.overview.up_speed)),1),t[3]||(t[3]=l("div",{class:"stat-label"},"å®žæ—¶ä¸Šä¼ ",-1))]),_:1})]),_:1}),a(r,{span:6},{default:o(()=>[a(s,{shadow:"hover",class:"stat-card gradient-down"},{default:o(()=>[t[4]||(t[4]=l("div",{class:"stat-icon"},"â†“",-1)),l("div",rt,c(k(p.overview.down_speed)),1),t[5]||(t[5]=l("div",{class:"stat-label"},"å®žæ—¶ä¸‹è½½",-1))]),_:1})]),_:1}),a(r,{span:6},{default:o(()=>[a(s,{shadow:"hover",class:"stat-card gradient-sent"},{default:o(()=>[t[6]||(t[6]=l("div",{class:"stat-icon"},"ðŸ“¤",-1)),l("div",nt,c(d(u.total_sent)),1),t[7]||(t[7]=l("div",{class:"stat-label"},"åŽ†å²æ€»å‘é€",-1))]),_:1})]),_:1}),a(r,{span:6},{default:o(()=>[a(s,{shadow:"hover",class:"stat-card gradient-recv"},{default:o(()=>[t[8]||(t[8]=l("div",{class:"stat-icon"},"ðŸ“¥",-1)),l("div",it,c(d(u.total_recv)),1),t[9]||(t[9]=l("div",{class:"stat-label"},"åŽ†å²æ€»æŽ¥æ”¶",-1))]),_:1})]),_:1})]),_:1}),a(z,{gutter:16,style:{"margin-top":"16px"}},{default:o(()=>[a(r,{span:16},{default:o(()=>[a(s,{shadow:"hover"},{header:o(()=>[l("div",dt,[t[13]||(t[13]=l("span",null,"æµé‡è¶‹åŠ¿",-1)),a(R,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=n=>v.value=n),size:"small"},{default:o(()=>[a(S,{value:"daily"},{default:o(()=>[...t[10]||(t[10]=[y("è¿‘30å¤©",-1)])]),_:1}),a(S,{value:"monthly"},{default:o(()=>[...t[11]||(t[11]=[y("æŒ‰æœˆ",-1)])]),_:1}),a(S,{value:"yearly"},{default:o(()=>[...t[12]||(t[12]=[y("æŒ‰å¹´",-1)])]),_:1})]),_:1},8,["modelValue"])])]),default:o(()=>[a(_(B),{option:L.value,style:{height:"320px"},autoresize:""},null,8,["option"])]),_:1})]),_:1}),a(r,{span:8},{default:o(()=>[a(s,{shadow:"hover"},{header:o(()=>[...t[14]||(t[14]=[l("span",null,"ä¸Šä¼  / ä¸‹è½½å æ¯”",-1)])]),default:o(()=>[a(_(B),{option:N.value,style:{height:"320px"},autoresize:""},null,8,["option"])]),_:1})]),_:1})]),_:1}),a(s,{shadow:"hover",style:{"margin-top":"16px"}},{header:o(()=>[...t[15]||(t[15]=[l("span",null,"æ¯æ—¥æµé‡å¯¹æ¯”ï¼ˆè¿‘ 14 å¤©ï¼‰",-1)])]),default:o(()=>[a(_(B),{option:F.value,style:{height:"280px"},autoresize:""},null,8,["option"])]),_:1}),a(s,{shadow:"hover",style:{"margin-top":"16px"}},{header:o(()=>[l("div",ut,[t[16]||(t[16]=l("span",null,"è¿›ç¨‹ç½‘ç»œä½¿ç”¨",-1)),l("div",ct,[a(A,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=n=>h.value=n),placeholder:"æœç´¢è¿›ç¨‹...",clearable:"",size:"small",style:{width:"200px"},"prefix-icon":_(W)},null,8,["modelValue","prefix-icon"]),a(U,{size:"small",loading:g.value,onClick:x},{default:o(()=>[a(T,null,{default:o(()=>[a(I)]),_:1})]),_:1},8,["loading"])])])]),default:o(()=>[a(D,{data:C.value,"default-sort":{prop:"total",order:"descending"},"max-height":"360",stripe:""},{default:o(()=>[a(m,{prop:"pid",label:"PID",width:"80",sortable:""}),a(m,{prop:"name",label:"è¿›ç¨‹å","min-width":"160",sortable:"","show-overflow-tooltip":""}),a(m,{label:"å‘é€",width:"140",sortable:"","sort-by":n=>n.sent},{default:o(({row:n})=>[l("span",pt,"â†‘ "+c(d(n.sent)),1)]),_:1},8,["sort-by"]),a(m,{label:"æŽ¥æ”¶",width:"140",sortable:"","sort-by":n=>n.recv},{default:o(({row:n})=>[l("span",ft,"â†“ "+c(d(n.recv)),1)]),_:1},8,["sort-by"]),a(m,{label:"æ€»è®¡",prop:"total",width:"140",sortable:""},{default:o(({row:n})=>[y(c(d(n.sent+n.recv)),1)]),_:1})]),_:1},8,["data"])]),_:1})])}}}),xt=ot(mt,[["__scopeId","data-v-aff3c7ce"]]);export{xt as default};
